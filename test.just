_default:
	just --list test

IMAGE := "bachowskimichal/devcontainer-test-ubuntu:v3"

autogenerated feature image=IMAGE:
	devcontainer features test \
		--features {{ feature }} \
		--remote-user root \
		--skip-scenarios \
		--skip-duplicated \
		--base-image {{ image }} \
		/workspaces/devcontainer-features

duplicate feature image=IMAGE:
	devcontainer features test \
		--features {{ feature }} \
		--remote-user root \
		--skip-autogenerated \
		--skip-scenarios \
		--base-image {{ image }} \
		/workspaces/devcontainer-features

global image=IMAGE:
	devcontainer features test \
		--global-scenarios-only \
		--remote-user root \
		--base-image {{ image }} \
		/workspaces/devcontainer-features

scenarios feature scenario="":
	devcontainer features test \
		--features {{ feature }} \
		--remote-user root \
		--skip-autogenerated \
		--skip-duplicated \
		--filter "{{ scenario }}" \
		/workspaces/devcontainer-features

all feature image=IMAGE:
	devcontainer features test \
		--features {{ feature }} \
		--remote-user root \
		--base-image {{ image }} \
		/workspaces/devcontainer-features
